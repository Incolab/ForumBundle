{% extends 'IncolabForumBundle::layout.html.twig' %}
{% block forum %}
    <div class="row">
        <div class="large-12 columns">
         <div class="cadre_parentC_forum text-center">
            <h2>{{ category.name }}</h2>
            <p>{{ category.description }}</p>
         </div>
         <div class="cat_forum">    
            {% for element in category.childs %}
                <h4><a href="{# {{ path('incolab_forum_admin_subcategory_add', {'slugParentCat': category.slug }) }} #}">{{ element.name }}</a></h4>
                <p>{{ element.description }}</p>
                <hr/>
            {% endfor %}
            
            {% include "IncolabForumBundle:Forms:categoryType.html.twig" with {'form': childCatForm} %}
        </div>
        
    </div>
{% endblock %}

{% block javascripts %}
    <script type="text/javascript">
 
    var readRolesCount = '{{ childCatForm.readRoles|length }}';
    var writeRolesCount = '{{ childCatForm.writeRoles|length }}';
 
    $(document).ready(function() {
        $('#add-another-read-role').click(function(e) {
            e.preventDefault();
 
            var rolesList = $('#read-roles-fields-list');
 
            // grab the prototype template
            var newWidget = rolesList.attr('data-prototype');
 
            newWidget = newWidget.replace(/__name__/g, readRolesCount);
            readRolesCount++;
 
            // create a new list element and add it to the list
            var newLi = $('<li></li>').html(newWidget);
            newLi.appendTo(rolesList);
        });
 
        $('#add-another-write-role').click(function(e) {
            e.preventDefault();
 
            var rolesList = $('#write-roles-fields-list');
 
            // grab the prototype template
            var newWidget = rolesList.attr('data-prototype');
            newWidget = newWidget.replace(/__name__/g, writeRolesCount);
            writeRolesCount++;
 
            // create a new list element and add it to the list
            var newLi = $('<li></li>').html(newWidget);
            newLi.appendTo(rolesList);
        });
    });
</script>
{% endblock javascripts %}
